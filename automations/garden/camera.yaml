---
alias: "Garden - Camera"
id: "dab55a89-c1fe-476b-93f0-8642efb19958"
mode: queued

trigger:
  - platform: homeassistant
    event: start

  - platform: event
    event_type: automation_reloaded

  - platform: state
    entity_id:
      - input_boolean.home_mode_away
      - input_boolean.home_mode_working

condition: []

variables:
  anchors:
    - &target
      target:
        entity_id: camera.blink_garden

    - &turn_off
      <<: *target
      alias: "Turn off motion"
      service: camera.disable_motion_detection
      data: {}

    - &turn_on
      <<: *target
      alias: "Turn on motion"
      service: camera.enable_motion_detection
      data: {}

action:
  - choose:
      - conditions:
          - alias: "When working from home"
            condition: state
            entity_id: input_boolean.home_mode_working
            state: "on"
        sequence:
          - *turn_off

    default:
      - *turn_on
