---
alias: "Landing - Camera"
id: "landing_camera_automation"
mode: queued

trigger:
  - platform: homeassistant
    event: start

  - platform: event
    event_type: automation_reloaded

  - platform: state
    entity_id:
      - input_boolean.home_mode_away

condition: []

variables:
  anchors:
    - &target
      target:
        entity_id: camera.landing

    - &turn_off
      <<: *target
      alias: "Turn off motion"
      service: camera.disable_motion_detection
      data: {}

    - &turn_on
      <<: *target
      alias: "Turn on motion"
      service: camera.enable_motion_detection
      data: {}

action:
  - choose:
      - conditions:
          - alias: "When home"
            condition: state
            entity_id: input_boolean.home_mode_away
            state: "off"
        sequence:
          - *turn_off

    default:
      - *turn_on
